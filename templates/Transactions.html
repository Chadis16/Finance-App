{% extends "layout.html" %}
{% block title %}
Transactions
{% endblock %}
{% block content %}
<div id="popup1" class="popup">
    <div class="popup-content">
        <h2>Transactions</h2>
        <form method="POST" action="/tranadd/">
            <label class="form-label" for="Date">Date</label>
            <input class="form-input" type="date" id="Date" name="Date" required>
            <br>
            <label class="form-label" for="Transaction">Transaction</label>
            <input class="form-input" type="text" placeholder="Enter Transaction" id="Transaction" name="Transaction" required>
            <br>
            <label class="form-label" for="Amount">Amount</label>
            <input class="form-input" type="number" id="Amount" name="Amount" step="0.01" required>
            <br>
            <label class="form-label" for="Category">Category</label>
            <select name="Category" id="Category">
                {% for categories in categories %}
                <option value="{{ categories }}">{{ categories }}</option>
                {% endfor %}
            </select>
            <br>
            <label for="Account">Choose Account:</label>
            <select name="Account" id="Account">
                <option value="{{ acct }}">{{ acct }}</option>
                {% for account in account %}
                <option value="{{ account }}">{{ account }}</option>
                {% endfor %}
            </select>
            <br>
            <button type="submit">Submit</button>
        </form>
        <button onclick="closepopup()" style="margin-top: 10px; padding:5px 10px; background-color: #dc3545; color: #fff; border: none; border-radius: 3px;">Close</button>
    </div>
</div>
<div id="popup2" class="popup">
    <div class="popup-content">
        <h2>Transactions</h2>
        <form method="POST" action="/tranedit/">
            <input type="hidden" id="ID" name="ID">
            <label class="form-label" for="Date1">Date</label>
            <input class="form-input" type="date" name="Date1" id='Date1' required>
            <br>
            <label class="form-label" for="Transaction1">Transaction</label>
            <input class="form-input" type="text" placeholder="Enter Transaction" id="Transaction1" name="Transaction1" required>
            <br>
            <label class="form-label" for="Amount1">Amount</label>
            <input class="form-input" type="number" id="Amount1" name="Amount1" step="0.01" required>
            <br>
            <label class="form-label" for="Category1">Category</label>
            <select name="Category1" id="Category1">
                {% for categories in categories %}
                <option value="{{ categories }}">{{ categories }}</option>
                {% endfor %}
            </select>
            <br>
            <label for="Account1">Choose Account:</label>
            <select name="Account1" id="Account1">
                <option value="{{ acct }}">{{ acct }}</option>
                {% for account in account %}
                <option value="{{ account }}">{{ account }}</option>
                {% endfor %}
            </select>
            <br>
            <button type="submit">Submit</button>
        </form>
        <button onclick="closepopup()" style="margin-top: 10px; padding:5px 10px; background-color: #dc3545; color: #fff; border: none; border-radius: 3px;">Close</button>
    </div>
</div>
<div id="popup3" class="popup">
    <div class="popup-content">
        <form method="POST" action="/tranupload/" enctype="multipart/form-data">
            <label for="CSV">Upload transactions CSV</label>
            <input type="file" id="CSV" name="CSV" accept=".csv">
            <br>
            <button type="submit">Submit</button>
        </form>
    </div>
</div>
<button onclick="addtran()" style="padding: 10px 20px; background-color: #28a745; color: #fff; border: none; border-radius: 5px;">Add Transaction</button>
<button onclick="importcsv()" style="padding: 10px 20px; background-color: #28a745; color: #fff; border: none; border-radius: 5px;">Import Transactions</button>
<form method="POST">
    <label for="Account">Choose Account:</label>
    <select name="Account" id="Account" onchange="this.form.submit()">
        <option value="{{ acct }}">{{ acct }}</option>
        {% for account in account %}
        <option value="{{ account }}">{{ account }}</option>
        {% endfor %}
    </select>
</form>
<div class="row">
    <div class="column-left">
        {{ table | safe }}
    </div>
    <div class="column-right">
        {{ balance | safe }}
    </div>
</div>
<script type="text/javascript">
    function addtran() {
        document.getElementById('popup1').style.display = 'flex';
    }
    function edittran(ID,Date,Transaction,Amount,Category,Account) {
        document.getElementById('ID').value = ID;
        document.getElementById('Date1').value = Date;
        document.getElementById('Transaction1').value = Transaction;
        document.getElementById('Amount1').value = Amount;
        document.getElementById('Category1').value = Category;
        document.getElementById('Account1').value = Account;
        document.getElementById('popup2').style.display = 'flex';
    }
    function closepopup() {
        document.getElementById('popup1').style.display = 'none'
        document.getElementById('popup2').style.display = 'none'
    }
    function importcsv(){
        document.getElementById('popup3').style.display = 'flex';
    }
</script>
{% endblock %}